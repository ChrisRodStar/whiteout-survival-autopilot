name: Daily Missions Rewards

node: daily_missions

priority: 20

steps:
  - if: # If "Claim All" button is available, just click it
      trigger: dailyMissions.state.isClaimAll
      then:
        - click: dailyMissions.state.isClaimAll
        - wait: 500ms
        - click: from_growth_missions_to_daily_missions
        - wait: 500ms
        - click: from_growth_missions_to_daily_missions
        - wait: 500ms
        - action: reset
          set: dailyMissions.state.isClaimAll
          to: false

  - if: # If "Claim All" button is not available, find and click each "Claim" button
      trigger: "!dailyMissions.state.isClaimAll && dailyMissions.state.isClaimButton"
      then:
        - action: loop
          trigger: dailyMissions.state.isClaimButton
          steps:
            - click: dailyMissions.state.isClaimButton
            - wait: 400ms
            - action: screenshot
              analyze:
                - name: dailyMissions.state.isClaimButton
                  action: findIcon
                  threshold: 0.7
                  saveAsRegion: true